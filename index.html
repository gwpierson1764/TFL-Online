<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TFL Prototype</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      display: flex;
      height: 100vh;
      flex-direction: row;
      overflow: hidden;
    }
    .home, .visitor, .center {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 10px;
    }
    .home {
      background: #003F87;
      color: white;
    }
    .visitor {
      background: #C8102E;
      color: white;
    }
    .center {
      background: white;
      color: #003F87;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }

    h1 { margin: 10px 0; }

    /* Momentum Circles */
    .momentum {
      display: flex;
      gap: 5px;
      margin: 10px 0;
    }
    .circle {
      width: 20px;
      height: 20px;
      border: 2px solid white;
      border-radius: 50%;
      background: transparent;
      cursor: pointer;
    }
    .circle.filled { background: white; }

    /* Possession Marker */
    .possession { font-size: 2em; margin-left: 10px; }

    button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .home button { background: white; color: #003F87; }
    .visitor button { background: white; color: #C8102E; }
    .center button { background: #003F87; color: white; }

    /* Field Tracker */
    .field-container {
      flex: 1;
      width: 150px;
      overflow-y: scroll;
      border: 2px solid #003F87;
      background: green;
      position: relative;
    }
    .yardline {
      position: relative;
      height: 10px; /* 1 yard = 10px */
      border-top: 1px solid white;
    }
    .yard-label {
      position: absolute;
      right: 2px;
      top: -6px;
      font-size: 0.7em;
      color: white;
    }
    .hash {
      position: absolute;
      left: 25%;
      width: 5px;
      height: 1px;
      background: white;
      top: 0;
    }
    .hash.right {
      left: 70%;
    }

    .marker {
      position: absolute;
      left: 0;
      width: 100%;
      height: 4px;
    }
    .los { background: blue; }
    .ltg { background: yellow; }
  </style>
</head>
<body>
  <!-- HOME -->
  <div class="home">
    <h1>HOME <span id="homePossession" class="possession"></span></h1>
    <h1 id="homeScore">0</h1>
    <div class="momentum" id="homeMomentum"></div>
    <button onclick="togglePossession('home')">Possession</button>
  </div>

  <!-- CENTER -->
  <div class="center">
    <img src="TFL_Logo.png" alt="TFL Logo" style="max-width:70%; margin:10px;">
    <button onclick="flipCoin()">Flip Coin</button>
    <p id="coinResult"></p>
    <div class="field-container" id="fieldContainer"></div>
  </div>

  <!-- VISITOR -->
  <div class="visitor">
    <h1>VISITOR <span id="visitorPossession" class="possession"></span></h1>
    <h1 id="visitorScore">0</h1>
    <div class="momentum" id="visitorMomentum"></div>
    <button onclick="togglePossession('visitor')">Possession</button>
  </div>

  <script>
    // === Momentum Trackers ===
    const maxMomentum = 5;
    let momentum = { home: 0, visitor: 0 };

    function renderMomentum(team) {
      const container = document.getElementById(team + "Momentum");
      container.innerHTML = "";
      for (let i = 0; i < maxMomentum; i++) {
        const circle = document.createElement("div");
        circle.className = "circle";
        if (i < momentum[team]) circle.classList.add("filled");
        circle.onclick = () => spendMomentum(team);
        container.appendChild(circle);
      }
    }

    function gainMomentum(team) {
      if (momentum[team] < maxMomentum) momentum[team]++;
      renderMomentum(team);
    }

    function spendMomentum(team) {
      if (momentum[team] > 0) {
        momentum[team]--;
        renderMomentum(team);
      }
    }

    // === Possession ===
    function togglePossession(team) {
      document.getElementById("homePossession").textContent = "";
      document.getElementById("visitorPossession").textContent = "";
      if (team === "home") document.getElementById("homePossession").textContent = "üèà";
      else document.getElementById("visitorPossession").textContent = "üèà";
    }

    // === Coin flip ===
    function flipCoin() {
      document.getElementById("coinResult").textContent =
        Math.random() < 0.5 ? "Heads" : "Tails";
    }

    // === Field Setup ===
    let lineOfScrimmage = 20; // start at 20-yard line
    let yardsToGain = 10;
    let lineToGain = lineOfScrimmage + yardsToGain;

    function buildField() {
      const container = document.getElementById("fieldContainer");
      container.innerHTML = "";

      for (let y = 0; y <= 100; y++) {
        const div = document.createElement("div");
        div.className = "yardline";
        if (y % 5 === 0) {
          const label = document.createElement("div");
          label.className = "yard-label";
          label.textContent = y;
          div.appendChild(label);
        }
        const hashLeft = document.createElement("div");
        hashLeft.className = "hash";
        div.appendChild(hashLeft);
        const hashRight = document.createElement("div");
        hashRight.className = "hash right";
        div.appendChild(hashRight);

        // Add LOS marker
        if (y === lineOfScrimmage) {
          const losMarker = document.createElement("div");
          losMarker.className = "marker los";
          div.appendChild(losMarker);
        }

        // Add LTG marker
        if (y === lineToGain) {
          const ltgMarker = document.createElement("div");
          ltgMarker.className = "marker ltg";
          div.appendChild(ltgMarker);
        }

        container.appendChild(div);
      }

      // auto-scroll to show LOS ¬±10 and +20 yards
      const scrollPos = Math.max(0, (lineOfScrimmage - 10) * 10);
      container.scrollTop = scrollPos;
    }

    // === Initialize ===
    renderMomentum("home");
    renderMomentum("visitor");
    buildField();
  </script>
</body>
</html>
